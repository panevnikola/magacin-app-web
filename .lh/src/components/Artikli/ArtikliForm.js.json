{
    "sourceFile": "src/components/Artikli/ArtikliForm.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 17,
            "patches": [
                {
                    "date": 1641128803146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1641311194174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,8 +64,9 @@\n \n   const editArtikal = (event, artikal) => {\n     event.stopPropagation();\n     let path = `/artikli/create`;\n+    console.log('REDIRECT TO EDIT ', artikal)\n     history.push(path, artikal);\n   };\n \n   const onDeleteArtikal = (event, artikal) => {\n"
                },
                {
                    "date": 1643827618177,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,8 +20,9 @@\n \n import { getRequest } from '../../services/httpService';\n import useStyles from './ArtikliStyles';\n import ConfirmationDialog from '../UI/ConfirmationDialog';\n+import Snackbar from '@material-ui/core/Snackbar';\n \n const ArtikliForm = (props) => {\n   const classes = useStyles();\n   const history = useHistory();\n@@ -32,8 +33,11 @@\n   const [page, setPage] = useState(0);\n \n   const [shouldOpenDeleteDialog, setShouldOpenDeleteDialog] = useState(false);\n   const [artikalToDelete, setArtikalToDelete] = useState(null);\n+  const [openSnackbar, setOpenSnackbar] = useState(false);\n+  const [successMessage, setSuccessMessage] = useState('');\n+  const [errorMessage, setErrorMessage] = useState('');\n \n   useEffect(() => {\n     onFetchArtikli();\n   }, []);\n"
                },
                {
                    "date": 1643827818224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,8 +83,12 @@\n     onFetchArtikli();\n     setShouldOpenDeleteDialog(false);\n   };\n \n+  const onDeleteMessage = (message) => {\n+    console.log('message ', message);\n+  }\n+\n   console.log('artikli', artikli);\n \n   return (\n     <React.Fragment>\n@@ -234,8 +238,9 @@\n           onYesClick={() => {}}\n           text='Дали сигурно сакате да го избришете артиклот ?'\n           item={artikalToDelete}\n           path='artikli'\n+          onDeleteMessage={onDeleteMessage}\n         />\n       )}\n     </React.Fragment>\n   );\n"
                },
                {
                    "date": 1643827994147,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,8 +85,9 @@\n   };\n \n   const onDeleteMessage = (message) => {\n     console.log('message ', message);\n+    setErrorMessage(message);\n   }\n \n   console.log('artikli', artikli);\n \n"
                },
                {
                    "date": 1643828004629,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,8 +86,9 @@\n \n   const onDeleteMessage = (message) => {\n     console.log('message ', message);\n     setErrorMessage(message);\n+    setOpenSnackbar(true);\n   }\n \n   console.log('artikli', artikli);\n \n"
                },
                {
                    "date": 1643828084234,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,13 +16,14 @@\n import EditIcon from '@material-ui/icons/Edit';\n import DeleteIcon from '@material-ui/icons/Delete';\n import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n import CancelIcon from '@material-ui/icons/Cancel';\n+import Snackbar from '@material-ui/core/Snackbar';\n+import MuiAlert from '@material-ui/lab/Alert';\n \n import { getRequest } from '../../services/httpService';\n import useStyles from './ArtikliStyles';\n import ConfirmationDialog from '../UI/ConfirmationDialog';\n-import Snackbar from '@material-ui/core/Snackbar';\n \n const ArtikliForm = (props) => {\n   const classes = useStyles();\n   const history = useHistory();\n@@ -68,9 +69,9 @@\n \n   const editArtikal = (event, artikal) => {\n     event.stopPropagation();\n     let path = `/artikli/create`;\n-    console.log('REDIRECT TO EDIT ', artikal)\n+    console.log('REDIRECT TO EDIT ', artikal);\n     history.push(path, artikal);\n   };\n \n   const onDeleteArtikal = (event, artikal) => {\n@@ -87,12 +88,22 @@\n   const onDeleteMessage = (message) => {\n     console.log('message ', message);\n     setErrorMessage(message);\n     setOpenSnackbar(true);\n-  }\n+  };\n \n-  console.log('artikli', artikli);\n+  const Alert = (props) => {\n+    return <MuiAlert elevation={6} variant='filled' {...props} />;\n+  };\n \n+  const handleCloseSnackbar = (event, reason) => {\n+    if (reason === 'clickaway') {\n+      return;\n+    }\n+\n+    setOpenSnackbar(false);\n+  };\n+\n   return (\n     <React.Fragment>\n       <div className={classes.searchContainer}>\n         <Button\n@@ -193,9 +204,11 @@\n                     <TableCell>{artikal.opis}</TableCell>\n                     <TableCell>{artikal.cena} MKD</TableCell>\n                     <TableCell>\n                       {artikal.dostapnost === 1 ? (\n-                        <CheckCircleIcon style={{ color: '#4BB543', marginLeft: 25 }} />\n+                        <CheckCircleIcon\n+                          style={{ color: '#4BB543', marginLeft: 25 }}\n+                        />\n                       ) : (\n                         <CancelIcon color='danger' style={{ marginLeft: 25 }} />\n                       )}\n                     </TableCell>\n@@ -243,8 +256,17 @@\n           path='artikli'\n           onDeleteMessage={onDeleteMessage}\n         />\n       )}\n+      <Snackbar\n+        open={openSnackbar}\n+        autoHideDuration={3000}\n+        onClose={handleCloseSnackbar}\n+      >\n+        <Alert onClose={handleCloseSnackbar} severity='error'>\n+          {successMessage}\n+        </Alert>\n+      </Snackbar>\n     </React.Fragment>\n   );\n };\n \n"
                },
                {
                    "date": 1643828342186,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,8 +88,9 @@\n   const onDeleteMessage = (message) => {\n     console.log('message ', message);\n     setErrorMessage(message);\n     setOpenSnackbar(true);\n+    handleDeleteDialogClose();\n   };\n \n   const Alert = (props) => {\n     return <MuiAlert elevation={6} variant='filled' {...props} />;\n@@ -262,9 +263,9 @@\n         autoHideDuration={3000}\n         onClose={handleCloseSnackbar}\n       >\n         <Alert onClose={handleCloseSnackbar} severity='error'>\n-          {successMessage}\n+          {errorMessage}\n         </Alert>\n       </Snackbar>\n     </React.Fragment>\n   );\n"
                },
                {
                    "date": 1643828441198,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,8 @@\n   const onDeleteMessage = (message) => {\n     console.log('message ', message);\n     setErrorMessage(message);\n     setOpenSnackbar(true);\n-    handleDeleteDialogClose();\n   };\n \n   const Alert = (props) => {\n     return <MuiAlert elevation={6} variant='filled' {...props} />;\n"
                },
                {
                    "date": 1643828479275,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -258,9 +258,9 @@\n         />\n       )}\n       <Snackbar\n         open={openSnackbar}\n-        autoHideDuration={3000}\n+        autoHideDuration={5000}\n         onClose={handleCloseSnackbar}\n       >\n         <Alert onClose={handleCloseSnackbar} severity='error'>\n           {errorMessage}\n"
                },
                {
                    "date": 1643828852687,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,11 +84,15 @@\n     onFetchArtikli();\n     setShouldOpenDeleteDialog(false);\n   };\n \n-  const onDeleteMessage = (message) => {\n+  const onDeleteMessage = (message, status) => {\n     console.log('message ', message);\n-    setErrorMessage(message);\n+    if (status === 1) {\n+      setSuccessMessage(message);\n+    } else {\n+      setErrorMessage(message);\n+    }\n     setOpenSnackbar(true);\n   };\n \n   const Alert = (props) => {\n"
                },
                {
                    "date": 1643828895495,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -266,9 +266,9 @@\n         autoHideDuration={5000}\n         onClose={handleCloseSnackbar}\n       >\n         <Alert onClose={handleCloseSnackbar} severity='error'>\n-          {errorMessage}\n+          {successMessage !== '' ? successMessage : errorMessage}\n         </Alert>\n       </Snackbar>\n     </React.Fragment>\n   );\n"
                },
                {
                    "date": 1643828916512,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -265,9 +265,12 @@\n         open={openSnackbar}\n         autoHideDuration={5000}\n         onClose={handleCloseSnackbar}\n       >\n-        <Alert onClose={handleCloseSnackbar} severity='error'>\n+        <Alert\n+          onClose={handleCloseSnackbar}\n+          severity={successMessage !== '' ? 'success' : 'error'}\n+        >\n           {successMessage !== '' ? successMessage : errorMessage}\n         </Alert>\n       </Snackbar>\n     </React.Fragment>\n"
                },
                {
                    "date": 1643828979843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,8 +103,10 @@\n     if (reason === 'clickaway') {\n       return;\n     }\n \n+    setSuccessMessage('');\n+    setErrorMessage('');\n     setOpenSnackbar(false);\n   };\n \n   return (\n"
                },
                {
                    "date": 1643829218114,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,14 +99,13 @@\n     return <MuiAlert elevation={6} variant='filled' {...props} />;\n   };\n \n   const handleCloseSnackbar = (event, reason) => {\n+    setSuccessMessage('');\n+    setErrorMessage('');\n     if (reason === 'clickaway') {\n       return;\n     }\n-\n-    setSuccessMessage('');\n-    setErrorMessage('');\n     setOpenSnackbar(false);\n   };\n \n   return (\n"
                },
                {
                    "date": 1643829279423,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,13 +99,15 @@\n     return <MuiAlert elevation={6} variant='filled' {...props} />;\n   };\n \n   const handleCloseSnackbar = (event, reason) => {\n-    setSuccessMessage('');\n-    setErrorMessage('');\n     if (reason === 'clickaway') {\n+      setSuccessMessage('');\n+      setErrorMessage('');\n       return;\n     }\n+    setSuccessMessage('');\n+    setErrorMessage('');\n     setOpenSnackbar(false);\n   };\n \n   return (\n"
                },
                {
                    "date": 1643829373988,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -102,8 +102,9 @@\n   const handleCloseSnackbar = (event, reason) => {\n     if (reason === 'clickaway') {\n       setSuccessMessage('');\n       setErrorMessage('');\n+      setOpenSnackbar(false);\n       return;\n     }\n     setSuccessMessage('');\n     setErrorMessage('');\n"
                },
                {
                    "date": 1643829399626,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,11 +100,8 @@\n   };\n \n   const handleCloseSnackbar = (event, reason) => {\n     if (reason === 'clickaway') {\n-      setSuccessMessage('');\n-      setErrorMessage('');\n-      setOpenSnackbar(false);\n       return;\n     }\n     setSuccessMessage('');\n     setErrorMessage('');\n"
                }
            ],
            "date": 1641128803145,
            "name": "Commit-0",
            "content": "import React, { useState, useCallback, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  IconButton,\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n  TablePagination,\n  Button,\n  Card,\n  Typography,\n  TextField,\n} from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport { getRequest } from '../../services/httpService';\nimport useStyles from './ArtikliStyles';\nimport ConfirmationDialog from '../UI/ConfirmationDialog';\n\nconst ArtikliForm = (props) => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const [artikli, setArtikli] = useState([]);\n  const [search, setSearch] = useState('');\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [page, setPage] = useState(0);\n\n  const [shouldOpenDeleteDialog, setShouldOpenDeleteDialog] = useState(false);\n  const [artikalToDelete, setArtikalToDelete] = useState(null);\n\n  useEffect(() => {\n    onFetchArtikli();\n  }, []);\n\n  const onFetchArtikli = useCallback(async () => {\n    const result = await getRequest('/artikli');\n    if (result.status === 200) {\n      setArtikli(result.data);\n    }\n  }, []);\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleSearch = (value) => {\n    setSearch(value);\n  };\n\n  const handleRowsPerPage = (event) => {\n    setRowsPerPage(event.target.value);\n  };\n\n  const redirectToCreateArtikal = () => {\n    let path = `/artikli/create`;\n    history.push(path);\n  };\n\n  const editArtikal = (event, artikal) => {\n    event.stopPropagation();\n    let path = `/artikli/create`;\n    history.push(path, artikal);\n  };\n\n  const onDeleteArtikal = (event, artikal) => {\n    event.stopPropagation();\n    setArtikalToDelete(artikal);\n    setShouldOpenDeleteDialog(true);\n  };\n\n  const handleDeleteDialogClose = () => {\n    onFetchArtikli();\n    setShouldOpenDeleteDialog(false);\n  };\n\n  console.log('artikli', artikli);\n\n  return (\n    <React.Fragment>\n      <div className={classes.searchContainer}>\n        <Button\n          variant='contained'\n          color='secondary'\n          onClick={() => redirectToCreateArtikal()}\n        >\n          Kreiraj Nov Artikal\n        </Button>\n\n        <form noValidate autoComplete='off'>\n          <TextField\n            id='filter-artikli'\n            label='Пребарувај артикли'\n            fullWidth\n            value={search}\n            onChange={(e) => handleSearch(e.target.value)}\n          />\n        </form>\n      </div>\n      {artikli.length === 0 ? (\n        <Typography variant='h6' style={{ marginTop: 30 }}>\n          Ne se pronajdeni artikli vo databazata.\n        </Typography>\n      ) : (\n        <Card className={classes.card} elevation={6}>\n          <Table\n            style={{ whiteSpace: 'pre', minWidth: '750px' }}\n            stickyHeader={true}\n          >\n            <TableHead>\n              <TableRow>\n                <TableCell>\n                  <Typography variant='subtitle2'>Id</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant='subtitle2'>Slika</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant='subtitle2'>Ime</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant='subtitle2'>Grupa</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant='subtitle2'>Podgrupa</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant='subtitle2'>Opis</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant='subtitle2'>Cena</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant='subtitle2'>Dostapnost</Typography>\n                </TableCell>\n                <TableCell>\n                  <Typography variant='subtitle2'>Korekcija</Typography>\n                </TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {artikli\n                .filter(\n                  (artikal) =>\n                    artikal.id\n                      .toString()\n                      .toLowerCase()\n                      .indexOf(search.toLowerCase()) !== -1 ||\n                    artikal.ime.toLowerCase().indexOf(search.toLowerCase()) !==\n                      -1\n                )\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((artikal, index) => (\n                  <TableRow\n                    key={artikal.id}\n                    className={classes.tableRow}\n                    onClick={(event) => editArtikal(event, artikal)}\n                  >\n                    <TableCell>{artikal.id}</TableCell>\n                    <TableCell>\n                      <div className={classes.imageContainer}>\n                        <img\n                          className={classes.image}\n                          src={artikal.slikaUrl}\n                          alt=''\n                        />\n                      </div>\n                    </TableCell>\n                    <TableCell\n                      align='left'\n                      style={{ whiteSpace: 'normal', wordWrap: 'break-word' }}\n                    >\n                      {artikal.ime}\n                    </TableCell>\n                    <TableCell>{artikal.grupa}</TableCell>\n                    <TableCell>{artikal.podgrupa}</TableCell>\n                    <TableCell>{artikal.opis}</TableCell>\n                    <TableCell>{artikal.cena} MKD</TableCell>\n                    <TableCell>\n                      {artikal.dostapnost === 1 ? (\n                        <CheckCircleIcon style={{ color: '#4BB543', marginLeft: 25 }} />\n                      ) : (\n                        <CancelIcon color='danger' style={{ marginLeft: 25 }} />\n                      )}\n                    </TableCell>\n                    <TableCell>\n                      <IconButton\n                        onClick={(event) => editArtikal(event, artikal)}\n                      >\n                        <EditIcon color='secondary'>edit</EditIcon>\n                      </IconButton>\n                      <IconButton\n                        onClick={(event) => onDeleteArtikal(event, artikal)}\n                      >\n                        <DeleteIcon color='error'>delete</DeleteIcon>\n                      </IconButton>\n                    </TableCell>\n                  </TableRow>\n                ))}\n            </TableBody>\n          </Table>\n\n          <TablePagination\n            rowsPerPageOptions={[5, 10, 25]}\n            component='div'\n            count={artikli.length}\n            rowsPerPage={rowsPerPage}\n            page={page}\n            backIconButtonProps={{\n              'aria-label': 'Previous Page',\n            }}\n            nextIconButtonProps={{\n              'aria-label': 'Next Page',\n            }}\n            onChangePage={handleChangePage}\n            onChangeRowsPerPage={handleRowsPerPage}\n          />\n        </Card>\n      )}\n      {shouldOpenDeleteDialog && (\n        <ConfirmationDialog\n          open={shouldOpenDeleteDialog}\n          handleClose={handleDeleteDialogClose}\n          onYesClick={() => {}}\n          text='Дали сигурно сакате да го избришете артиклот ?'\n          item={artikalToDelete}\n          path='artikli'\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default ArtikliForm;\n"
        }
    ]
}